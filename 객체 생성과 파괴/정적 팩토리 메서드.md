# 정적 팩토리 메서드

- [정적 팩토리 메서드](#정적-팩토리-메서드)
  - [동기](#동기)
  - [정의](#정의)
  - [장점](#장점)
  - [단점](#단점)
  - [자주 쓰이는 명명방식](#자주-쓰이는-명명방식)

결론

- public 생성자하고 정팩 메서드는 장단점이 있어 적절히 잘 사용하는 것이 좋다.
- 그러나 대부분 정팩을 사용하는 것이 유리한 경우가 많음

<br>

## 동기

`public 생성자`

- 전통적으로 클래스의 인스턴스를 얻는 방식
- 생성자에 넘기는 매개변수의 특성을 파악하기 힘듬 (ex. new Pizza(1,5,7) )
- 생성자 자체만으로 반환되는 객체의 특성을 파악하기 힘듬

---

<br>

## 정의

```
정적 팩토리 메서드: static 메서드로 객체를 반환하는 방법
```

## 장점

- 이름을 가질 수 있기 때문에, 반환될 객체의 특성을 추론할 수 있음
- 인스턴스 생성을 제어할 수 있기 때문에(싱글톤과 같이 캐싱하여), 불필요한 객체 인스턴스 생성을 피할수 있음
- 입력 매개 변수에 따라 매번 다른 클래스의 객체(`하위 타입인 클래스들`)를 반환할 수 있음 `(유연성)`
- 정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 됨

  <br/>

마지막에 적힌 장점은 아래와 같이

- 인터페이스나 클래스가 만들어지는 시점에서 하위 타입의 클래스가 존재하지 않아도
- 나중에 구현될 클래스가 해당 인터페이스나 클래스를 상속받으면 언제든지 의존성을 주입 받아서 사용이 가능함을 의미함

```java
public class TicketStore{
    public staic List<TicketSeller> getSellers(){
        return new ArrayList<>;
    }
}
```

<br>

## 단점

- 정적 팩토리 메서드만 제공하면 하위 클래스를 만들 수 없다(상속을 하려면 public 이나 protected 생성자가 필요하니)
- 생성자처럼 API 설명에 명확히 드러나지 않아, 정적 팩토리 메서드는 프로그래머가 찾기 어려움

<br>

## 자주 쓰이는 명명방식

1. `from`: 매개 변수 하나 받아서, 해당 타입의 인스턴스로 형변환할 때

2. `of`: 여러 매개변수를 받아 정확한 타입의 인스턴스를 반환하는 집계 함수

```java
Set<Rank> faceCards = EnumSet.of(JACK, QUEEN, KING);
```

3. `valueOf`: from과 of의 더 자세한 버전

4. `instace`, `getInstance`: 매개변수로 명시한 인스턴스를 반환하지만, 같은 인스턴스임을 보장하지는 않는다.

5. `create`, `newInstace`: 4번과 동일 의미, but 매번 새로운 인스턴스를 생성해 반환함을 보장

6. `getTYPE`, `newTYPE`: 생성할 클래스가 아닌 다른 클래스에 팩터리 메서드를 정의할 때 사용

```java
Pizza pz = Cook.getPizza(src);
```

7. `type`: 6번의 간결한 버전

```
Pizza pz = Cook.pizza(src);
```
